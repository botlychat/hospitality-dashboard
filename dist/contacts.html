<!doctype html>
<html lang="en">
<head>

	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<base href="/hospitality-dashboard/">
	<title>Contacts — Hospitality Booking Admin</title>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
	<!-- Extracted & Organized CSS Files -->
	<link rel="stylesheet" href="css/variables.css">
	<link rel="stylesheet" href="css/global.css">
	<link rel="stylesheet" href="css/responsive.css">
	<link rel="stylesheet" href="css/profile.css">
	<link rel="stylesheet" href="css/contacts.css">
	<!-- Storage helper with error handling -->
	<script src="js/storage.js"></script>
	<!-- Service Worker registration for caching -->
	<script>
		if ('serviceWorker' in navigator) {
			navigator.serviceWorker.register('service-worker.js')
				.then(reg => console.log('[SW] Registered:', reg))
				.catch(err => console.log('[SW] Registration failed:', err));
		}
	</script>

</head>
<body>
	<div class="app">
<aside class="sidebar">
	<div class="brand"><div class="logo">RG</div><h1>Riyadh Getaways</h1></div>
	<nav>
		<div class="nav-item active" data-link="dashboard.html"><i class="fa-solid fa-gauge"></i> <span data-i18n="dashboard">Dashboard</span></div>
		<div class="nav-item" data-link="calendar.html"><i class="fa-regular fa-calendar"></i> <span data-i18n="calendar">Calendar</span></div>
		<div class="nav-item" data-link="units.html"><i class="fa-solid fa-building"></i> <span data-i18n="units">Units</span></div>
		<div class="nav-item" data-link="website.html"><i class="fa-solid fa-globe"></i> <span data-i18n="website">Website Settings</span></div>
		<div class="nav-item" data-link="aiagent.html"><i class="fa-solid fa-robot"></i> <span data-i18n="aiagent">AI Agent</span></div>
		<div class="nav-item" data-link="contacts.html"><i class="fa-solid fa-address-book"></i> <span data-i18n="contacts">Contacts</span></div>
	</nav>
	<div class="sidebar-footer">© <strong>Riyadh Getaways</strong><br>Admin Dashboard</div>
</aside>

<main class="main">
	<header class="header">
		<div class="left">
			<button id="sidebarToggle" class="sidebar-toggle" aria-label="Toggle sidebar" style="display:none;background:none;border:none;cursor:pointer;font-size:20px;color:var(--sidebar);padding:8px;margin-right:8px"><i class="fa-solid fa-bars"></i></button>
			<h2 style="margin:0" id="headerTitle" data-i18n="dashboard">Dashboard</h2>
		</div>
		<div style="display:flex;align-items:center;gap:12px">
			<div class="search"><i class="fa-solid fa-magnifying-glass" style="color:var(--muted)"></i> <input placeholder="Search bookings, units, clients..." data-i18n-placeholder="searchPlaceholder" style="border:none;outline:none;margin-left:8px;font-size:14px;"></div>
			
			<!-- Profile Icon with Dropdown -->
			<div class="profile-dropdown" id="profileDropdown">
				<button class="profile-icon-btn" id="profileIconBtn" aria-label="Profile menu">
					<i class="fa-solid fa-user-circle"></i>
				</button>
				<div class="profile-dropdown-menu" id="profileDropdownMenu">
					<button class="profile-menu-item" id="accountSettingsBtn">
						<i class="fa-solid fa-user-gear"></i>
						<span data-i18n="accountSettings">Account Settings</span>
					</button>
					<button class="profile-menu-item" id="languageToggleBtn">
						<i class="fa-solid fa-globe"></i>
						<span data-i18n="language">Language</span>
						<span class="language-badge" id="currentLangBadge">EN</span>
					</button>
					<div class="menu-divider"></div>
					<button class="profile-menu-item logout-item" id="logoutBtn">
						<i class="fa-solid fa-right-from-bracket"></i>
						<span data-i18n="logout">Logout</span>
					</button>
				</div>
			</div>
		</div>
	</header>

	<section class="content">
		
				<div class="panel">
					<h3><i class="fa-solid fa-users"></i> Contacts Management</h3>
					
					<div style="display:flex;gap:12px;margin-bottom:16px;flex-wrap:wrap">
						<button class="btn primary" onclick="openCampaignModal()"><i class="fa-solid fa-envelope"></i> WhatsApp Campaign</button>
						<button class="btn ghost" onclick="exportClients('all')"><i class="fa-solid fa-download"></i> Export All</button>
						<button class="btn ghost" onclick="exportClients('selected')"><i class="fa-solid fa-download"></i> Export Selected</button>
					</div>

					<!-- Filters -->
					<div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:12px;margin-bottom:16px;padding:12px;background:#f9fafb;border-radius:8px">
						<input type="text" id="filterName" placeholder="Filter by name..." style="padding:8px;border:1px solid #e5e7eb;border-radius:6px;font-size:13px">
						<input type="text" id="filterPhone" placeholder="Filter by phone..." style="padding:8px;border:1px solid #e5e7eb;border-radius:6px;font-size:13px">
						<input type="text" id="filterEmail" placeholder="Filter by email..." style="padding:8px;border:1px solid #e5e7eb;border-radius:6px;font-size:13px">
						<select id="filterGroup" style="padding:8px;border:1px solid #e5e7eb;border-radius:6px;font-size:13px">
							<option value="">All Groups</option>
						</select>
						<select id="filterUnit" style="padding:8px;border:1px solid #e5e7eb;border-radius:6px;font-size:13px">
							<option value="">All Units</option>
						</select>
						<button class="btn ghost" onclick="clearFilters()" style="padding:8px">Clear Filters</button>
					</div>

					<!-- Contacts Table -->
					<div class="table-scroll-wrapper" style="overflow-x:auto;margin-bottom:16px">
						<table>
							<thead>
								<tr style="background:#f3f4f6;border-bottom:1px solid #e5e7eb">
									<th><input type="checkbox" id="selectAllCheckbox" onchange="toggleSelectAll()"></th>
									<th>Name</th>
									<th>Phone</th>
									<th>Email</th>
									<th>Last Group</th>
									<th>Last Unit</th>
									<th>Last Booking</th>
									<th>Review</th>
									<th>Payment</th>
									<th style="text-align:center">Actions</th>
								</tr>
							</thead>
							<tbody id="clientsTableBody">
								<!-- Populated by JavaScript -->
							</tbody>
						</table>
					</div>

					<!-- Pagination -->
					<div style="display:flex;justify-content:space-between;align-items:center;padding:12px;background:#f9fafb;border-radius:8px">
						<div style="font-size:13px;color:#6b7280">
							Showing <strong id="pageStart">1</strong>-<strong id="pageEnd">25</strong> of <strong id="totalClients">0</strong> contacts
						</div>
						<div style="display:flex;gap:8px">
							<button class="btn ghost" onclick="previousPage()" style="padding:6px 12px;font-size:12px"><i class="fa-solid fa-chevron-left"></i></button>
							<input type="number" id="pageInput" min="1" style="width:50px;padding:6px;border:1px solid #e5e7eb;border-radius:6px;font-size:12px;text-align:center">
							<button class="btn ghost" onclick="goToPage()" style="padding:6px 12px;font-size:12px">Go</button>
							<button class="btn ghost" onclick="nextPage()" style="padding:6px 12px;font-size:12px"><i class="fa-solid fa-chevron-right"></i></button>
						</div>
					</div>

					<div style="margin-top:12px;font-size:12px;color:#6b7280">
						Selected: <strong id="selectedCount">0</strong> contacts
					</div>
				</div>
			
	</section>
</main>

	</div>
</body>
</html>
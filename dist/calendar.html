<!doctype html>
<html lang="en">
<head>

	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<base href="/hospitality-dashboard/">
	<title>Calendar — Hospitality Booking Admin</title>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
	<!-- Extracted & Organized CSS Files -->
	<link rel="stylesheet" href="css/variables.css">
	<link rel="stylesheet" href="css/global.css">
	<link rel="stylesheet" href="css/responsive.css">
	<link rel="stylesheet" href="css/profile.css">
	<link rel="stylesheet" href="css/calendar.css">
	<!-- Storage helper with error handling -->
	<script src="js/storage.js"></script>
	<!-- Utils for getCountryCodes() and other utilities -->
	<script src="js/utils.js"></script>
	<!-- Service Worker registration for caching -->
	<script>
		if ('serviceWorker' in navigator) {
			navigator.serviceWorker.register('service-worker.js')
				.then(reg => console.log('[SW] Registered:', reg))
				.catch(err => console.log('[SW] Registration failed:', err));
		}
	</script>

</head>
<body>
	<div class="app">
<aside class="sidebar">
	<div class="brand"><div class="logo">RG</div><h1>Riyadh Getaways</h1></div>
	<nav>
		<div class="nav-item active" data-link="dashboard.html"><i class="fa-solid fa-gauge"></i> <span data-i18n="dashboard">Dashboard</span></div>
		<div class="nav-item" data-link="calendar.html"><i class="fa-regular fa-calendar"></i> <span data-i18n="calendar">Calendar</span></div>
		<div class="nav-item" data-link="units.html"><i class="fa-solid fa-building"></i> <span data-i18n="units">Units</span></div>
		<div class="nav-item" data-link="website.html"><i class="fa-solid fa-globe"></i> <span data-i18n="website">Website Settings</span></div>
		<div class="nav-item" data-link="aiagent.html"><i class="fa-solid fa-robot"></i> <span data-i18n="aiagent">AI Agent</span></div>
		<div class="nav-item" data-link="contacts.html"><i class="fa-solid fa-address-book"></i> <span data-i18n="contacts">Contacts</span></div>
	</nav>
	<div class="sidebar-footer">© <strong>Riyadh Getaways</strong><br>Admin Dashboard</div>
</aside>

<main class="main">
	<header class="header">
		<div class="left">
			<button id="sidebarToggle" class="sidebar-toggle" aria-label="Toggle sidebar" style="display:none;background:none;border:none;cursor:pointer;font-size:20px;color:var(--sidebar);padding:8px;margin-right:8px"><i class="fa-solid fa-bars"></i></button>
			<h2 style="margin:0" id="headerTitle" data-i18n="dashboard">Dashboard</h2>
		</div>
		<div style="display:flex;align-items:center;gap:12px">
			<div class="search"><i class="fa-solid fa-magnifying-glass" style="color:var(--muted)"></i> <input placeholder="Search bookings, units, clients..." data-i18n-placeholder="searchPlaceholder" style="border:none;outline:none;margin-left:8px;font-size:14px;"></div>
			<div class="profile" id="profileBtn" tabindex="0">
				<div style="text-align:right;margin-right:8px;font-size:13px"><div style="font-weight:700" data-i18n="admin">Admin</div><div style="font-size:12px;color:var(--muted)">riyadh@getaways</div></div>
				<div class="avatar"><i class="fa-solid fa-user"></i></div>
				<div class="profile-menu" id="profileMenu">
					<button id="profileSettings" data-i18n="businessInfo">Business Information</button>
					<button id="changePassword" data-i18n="changePassword">Change Password</button>
					<button id="changeEmail" data-i18n="changeEmail">Change Email</button>
					<div style="border-top:1px solid #e5e7eb;padding:8px 0;margin:8px 0;display:flex;gap:8px;align-items:center;justify-content:center">
						<button id="langToggle" style="display:flex;align-items:center;gap:6px;padding:8px 12px;border:1px solid #e5e7eb;background:#fff;cursor:pointer;font-size:12px;font-weight:600;color:#f97316;border-radius:6px;transition:all 0.2s ease" title="Toggle Language"><i class="fa-solid fa-globe"></i> <span id="langText">العربية</span></button>
					</div>
					<button id="logoutBtn" data-i18n="logout">Logout</button>
				</div>
			</div>
		</div>
	</header>

	<section class="content">
		
				<div class="toolbar">
					<div class="toolbar-left">
						<!-- Group selector with arrow indicator -->
						<div class="group-selector-wrapper">
							<select id="calendarGroupSelector" style="padding:8px 12px;border:1px solid #e5e7eb;border-radius:8px;font-size:13px;font-weight:600;background:#fff;cursor:pointer;min-width:180px;appearance:none;background-image:url('data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%2212%22 height=%2212%22 viewBox=%220 0 12 12%22%3E%3Cpath fill=%22%231f2937%22 d=%22M6 9L1 4h10z%22/%3E%3C/svg%3E');background-repeat:no-repeat;background-position:right 10px center;padding-right:32px">
								<!-- Group options will be populated by JavaScript -->
							</select>
							
							<!-- Unit filter next to group selector on desktop -->
							<div class="filter" style="flex:1;min-width:180px"><i class="fa-solid fa-filter"></i><select id="unitFilter"><option value="all" data-i18n="allUnits">All Units</option></select></div>
						</div>
						
						<!-- Month switcher centered -->
						<div class="month-centered" style="width:100%">
							<div class="month-switcher">
								<button id="prevMonth" aria-label="Previous month"><i class="fa-solid fa-chevron-left"></i></button>
								<div style="font-weight:700;font-size:14px" id="monthLabel">October 2025</div>
								<button id="nextMonth" aria-label="Next month"><i class="fa-solid fa-chevron-right"></i></button>
							</div>
						</div>
						
						<!-- New Booking button (will be repositioned on mobile) -->
						<button class="btn primary" id="addBookingBtn" data-i18n="newManualBooking" style="display:none"><i class="fa-solid fa-plus"></i> New Manual Booking</button>
					</div>
					
					<!-- Right side buttons for desktop -->
					<div class="toolbar-right">
						<button class="btn primary" id="addBookingBtnDesktop" data-i18n="newManualBooking"><i class="fa-solid fa-plus"></i> New Manual Booking</button>
						
						<!-- Unit filter for mobile (hidden on desktop) -->
						<div class="filter filter-mobile" style="display:none"><i class="fa-solid fa-filter"></i><select id="unitFilterMobile"><option value="all" data-i18n="allUnits">All Units</option></select></div>
						
						<button class="btn ghost" id="syncCalendarBtn" title="Sync external calendars to units"><i class="fa-solid fa-link"></i> Sync Calendar</button>
						<button class="btn ghost" id="getCalendarUrlBtn" title="Get shareable calendar URL for each unit"><i class="fa-solid fa-share"></i> Get Calendar URL</button>
					</div>
				</div>

				<div class="legend" id="unitLegend"></div>

				<div class="calendar-surface">
					<div class="weekdays" id="weekdaysRow"></div>
					<div class="calendar-grid" id="calendarGrid" aria-label="Interactive calendar"></div>
				</div>
			
	</section>
</main>

	</div>
</body>
</html>